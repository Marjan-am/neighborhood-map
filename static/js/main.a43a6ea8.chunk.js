(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,n,t){e.exports=t(45)},22:function(e,n,t){},24:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),i=t.n(o),s=(t(22),t(2)),c=t(3),u=t(5),l=t(4),m=t(6),p=(t(24),t(15)),d=t.n(p),f=function(e){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search",onChange:function(n){return e.props.updateQuery(n.target.value)}}),r.a.createElement("button",{className:"btn btn-outline-secondary  my-2 my-sm-0",type:"submit"},"Search"))}}]),n}(a.Component),v=function(e){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props,n=e.clickHandler,t=e.searchHanlder,a=e.updateQuery;return r.a.createElement("nav",{className:"navbar-primary navbar-light bg-light"},r.a.createElement(f,{onChange:t,updateQuery:a}),r.a.createElement("ul",{className:"navbar-primary-menu"},this.props.venues.map(function(e,t){return r.a.createElement("li",{key:t,onClick:function(){return n(t)},"aria-label":e.venue.name,tabIndex:"0"},r.a.createElement("span",{className:"nav-label"},e.venue.name))})))}}]),n}(a.Component),h=t(16),g=t.n(h);var b=function(e){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(r)))).state={venues:[],markers:[],contents:[],query:"",notVisibleMarkers:[],originalVenues:[]},t.mapLoader=function(){!function(e){var n=window.document.getElementsByTagName("script")[0],t=window.document.createElement("script");t.src=e,t.async=!0,t.defer=!0,n.parentNode.insertBefore(t,n),t.onerror=function(){alert("Error loading map! Check the URL!")}}("https://maps.googleapis.com/maps/api/js?key=AIzaSyBTVFVjqLRQAvF8dRZwr6g-GadDHiXxkF8&callback=initMap"),window.initMap=t.initMap},t.getVenues=function(){d.a.get("https://api.foursquare.com/v2/venues/explore?"+new URLSearchParams({client_id:"GZMVVG2WEA2M3VVKAVGXTSMKACFFZLZHMUSVYBGKUTDBTI1M",client_secret:"W5IKT542C1IOCMDMORI0YHDRIT2QLN2U4KT3E0ESWQ3XF3O4",near:"Escondido",query:"shops",limit:8,v:"20181105"})).then(function(e){t.setState({venues:e.data.response.groups[0].items,originalVenues:e.data.response.groups[0].items},t.mapLoader()),console.log(e)}).catch(function(e){alert("Fetching data from Foursquare was not possible!"),console.log("Error! "+e)})},t.createInfoWindow=function(){t.infoWindow=new window.google.maps.InfoWindow},t.createMap=function(){t.map=new window.google.maps.Map(document.getElementById("map"),{center:{lat:33.133648,lng:-117.073223},zoom:10})},t.createVenueContent=function(e,n){var t=e.venue,a=t.location;return'<div id="content"></div><h3>'+t.name+'</h3><div id="bodyContent"><p><b>Address: </b>'+a.address+"</p><p><b>City: </b>"+a.city+"</p><p><b>Country: </b>"+a.country+"</p></div>"},t.createVenueMarker=function(e,n){var a=new window.google.maps.Marker({position:{lat:e.venue.location.lat,lng:e.venue.location.lng},animation:window.google.maps.Animation.DROP,title:e.venue.name,id:e.venue.id});return a.addListener("click",function(){t.clickHandler(n)}),a},t.initMap=function(){var e=t.state.venues;t.createMap(),t.createInfoWindow();var n=e.map(function(e,n){return t.createVenueMarker(e,n)}),a=e.map(function(e,n){return t.createVenueContent(e,n)});t.setState({markers:n,contents:a}),n.forEach(function(e){return e.setMap(t.map)})},t.handleBounce=function(e){t.state.markers.map(function(n,t){t===e?(n.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){n.setAnimation(null)},550)):n.setAnimation(null)})},t.clickHandler=function(e){var n=t.state,a=n.contents,r=n.markers;t.handleBounce(e),t.infoWindow.setContent(a[e]),t.infoWindow.open(t.map,r[e])},t.updateQuery=function(e){var n,a;if(t.setState({query:e}),t.state.markers.map(function(e){return e.setVisible(!0)}),e){var r=new RegExp(g()(e),"i");n=t.state.venues.filter(function(e){return r.test(e.venue.name)}),t.setState({venues:n}),(a=t.state.markers.filter(function(e){return n.every(function(n){return n.venue.name!==e.title})})).forEach(function(e){return e.setVisible(!1)}),t.setState({notVisibleMarkers:a})}else t.setState({venues:t.state.originalVenues}),t.state.markers.forEach(function(e){return e.setVisible(!0)})},t}return Object(m.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){this.getVenues()}},{key:"render",value:function(){if(this.state.hasError)return r.a.createElement("div",{id:"Error-message","aria-label":"Error message"},"Sorry, something went wrong!");console.log("state ",this.state);var e=this.state.venues;return r.a.createElement("main",{className:"container-fluid"},r.a.createElement(v,{updateQuery:this.updateQuery,venues:e,filteredVenues:this.filteredVenues,clickHandler:this.clickHandler}),r.a.createElement("div",{id:"map",role:"application","aria-label":"Map"}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.a43a6ea8.chunk.js.map